<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP Config Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.3s ease-out;
        }
    </style>
</head>

<body class="bg-gray-50 dark:bg-gray-900">
    <div class="max-w-6xl mx-auto px-4 py-8">
        <!-- Header -->
        <div class="mb-8 fade-in">
            <div
                class="inline-flex items-center gap-2 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-3 py-1 rounded-full text-sm mb-3">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                </svg>
                MCP Config Dashboard
            </div>
            <h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-2">Your MCP Servers</h1>
            <p class="text-gray-600 dark:text-gray-400">Copy-paste ready configurations for Claude Desktop, Gemini CLI,
                and VSCode</p>
        </div>

        <!-- Platform Selector -->
        <div class="mb-6 flex items-center gap-4 fade-in">
            <span class="text-sm text-gray-600 dark:text-gray-400">Platform:</span>
            <select id="platform"
                class="px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white">
                <option value="mac">macOS</option>
                <option value="windows">Windows</option>
                <option value="linux">Linux</option>
            </select>
        </div>

        <!-- Host Client Tabs -->
        <div class="mb-6 fade-in">
            <div class="border-b border-gray-200 dark:border-gray-700">
                <nav class="flex gap-4">
                    <button class="tab-btn active px-4 py-2 border-b-2 font-medium text-sm" data-tab="claude">
                        <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z">
                            </path>
                        </svg>
                        Claude Desktop
                    </button>
                    <button class="tab-btn px-4 py-2 border-b-2 font-medium text-sm" data-tab="gemini">
                        <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z">
                            </path>
                        </svg>
                        Gemini CLI
                    </button>
                    <button class="tab-btn px-4 py-2 border-b-2 font-medium text-sm" data-tab="vscode">
                        <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                        </svg>
                        VSCode
                    </button>
                </nav>
            </div>
        </div>

        <!-- Content -->
        <div id="content" class="space-y-6"></div>
    </div>

    <script>
        const CONFIG_PATHS = {
            claude: {
                mac: '~/Library/Application Support/Claude/claude_desktop_config.json',
                windows: '%APPDATA%\\Claude\\claude_desktop_config.json',
                linux: '~/.config/Claude/claude_desktop_config.json'
            },
            gemini: {
                mac: '~/.gemini/settings.json',
                windows: '%USERPROFILE%\\.gemini\\settings.json',
                linux: '~/.gemini/settings.json'
            },
            vscode: {
                mac: '~/.vscode/settings.json',
                windows: '%APPDATA%\\Code\\User\\settings.json',
                linux: '~/.config/Code/User/settings.json'
            }
        };

        let currentPlatform = 'mac';
        let currentTab = 'claude';
        let configData = null;

        async function fetchConfig() {
            const res = await fetch('/api/config');
            configData = await res.json();
            render();
        }

        function render() {
            if (!configData) return;

            const content = document.getElementById('content');
            const path = CONFIG_PATHS[currentTab][currentPlatform];
            const config = currentTab === 'claude' ? configData.claude : configData.gemini;

            content.innerHTML = `
                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 fade-in">
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Config File Location</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Open this file and paste the config below</p>
                        </div>
                        <button onclick="copyText('${path}')" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm flex items-center gap-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                            </svg>
                            Copy Path
                        </button>
                    </div>
                    <div class="bg-gray-100 dark:bg-gray-900 rounded-lg p-3">
                        <code class="text-sm text-gray-800 dark:text-gray-200">${path}</code>
                    </div>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 fade-in">
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Configuration Snippet</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400">Detected ${configData.mcps.length} MCP servers</p>
                        </div>
                        <button onclick="copyText(\`${config.replace(/`/g, '\\`')}\`)" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm flex items-center gap-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                            </svg>
                            Copy Config
                        </button>
                    </div>
                    <pre class="bg-gray-100 dark:bg-gray-900 rounded-lg p-4 overflow-x-auto text-sm text-gray-800 dark:text-gray-200">${config}</pre>
                </div>

                <div class="bg-blue-50 dark:bg-blue-900/20 rounded-2xl border border-blue-200 dark:border-blue-800 p-6 fade-in">
                    <h3 class="text-lg font-semibold text-blue-900 dark:text-blue-200 mb-2">Quick Start</h3>
                    <ol class="space-y-2 text-sm text-blue-800 dark:text-blue-300">
                        <li>1. Copy the config file path above</li>
                        <li>2. Open it in your editor (create if it doesn't exist)</li>
                        <li>3. Copy and paste the configuration snippet</li>
                        <li>4. Restart ${currentTab === 'claude' ? 'Claude Desktop' : currentTab === 'gemini' ? 'Gemini CLI' : 'VSCode'}</li>
                        <li>5. Verify MCP tools appear in the interface</li>
                    </ol>
                </div>
            `;
        }

        function copyText(text) {
            navigator.clipboard.writeText(text);
            // Could add a toast notification here
        }

        document.getElementById('platform').addEventListener('change', (e) => {
            currentPlatform = e.target.value;
            render();
        });

        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.tab-btn').forEach(b => {
                    b.classList.remove('active', 'border-blue-600', 'text-blue-600');
                    b.classList.add('border-transparent', 'text-gray-600');
                });
                btn.classList.add('active', 'border-blue-600', 'text-blue-600');
                btn.classList.remove('border-transparent', 'text-gray-600');
                currentTab = btn.dataset.tab;
                render();
            });
        });

        // Initialize
        document.querySelector('.tab-btn.active').classList.add('border-blue-600', 'text-blue-600');
        fetchConfig();
    </script>
</body>

</html>